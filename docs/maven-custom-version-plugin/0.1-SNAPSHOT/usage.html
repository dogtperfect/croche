<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at Apr 18, 2011 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>maven-custom-version-plugin - Usage</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
      <meta name="author" content="croche" />
    <meta name="Date-Revision-yyyymmdd" content="20110418" />
    <meta http-equiv="Content-Language" content="en" />
        
  </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                maven-custom-version-plugin
                </div>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                
                <div class="xleft">
        <span id="publishDate">Last Published: 18 Apr 2011 14:42:43</span>
                  &nbsp;| <span id="projectVersion">Version: 0.1-SNAPSHOT</span>
                      </div>
            <div class="xright">                    <a href="http://maven.apache.org/" class="externalLink" title="Maven 2">Maven 2</a>
              
                
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                
                                <h5>Overview</h5>
                  <ul>
                  <li class="none">
                          <a href="index.html" title="Introduction">Introduction</a>
            </li>
                  <li class="none">
                          <a href="plugin-info.html" title="Goals">Goals</a>
            </li>
                  <li class="none">
            <strong>Usage</strong>
          </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                        <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                                            <li class="collapsed">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
                
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>Usage<a name="Usage"></a></h2><div class="section"><h3>Configuring the plugin<a name="Configuring_the_plugin"></a></h3><p>To start using the plugin you will need to configure the repository location for the plugin.</p><div class="source"><pre>&lt;project&gt;
  ...
  &lt;pluginRepositories&gt;
    &lt;pluginRepository&gt;
      &lt;id&gt;croche-releases&lt;/id&gt;
      &lt;url&gt;http://croche.googlecode.com/svn/repository/releases&lt;/url&gt;
    &lt;/pluginRepository&gt;
  &lt;/pluginRepositories&gt;
  ...
&lt;/project&gt;</pre></div></div><div class="section"><h3>Custom Version Configuration<a name="Custom_Version_Configuration"></a></h3><p>To configure the development and/or release versions used you can use the following settings within the <b>versionConfig</b> element:</p><ul><li><b>devVersionRegex</b> This is required if you want a custom development version to be used. This is the regular expression that identifies the groups in the current version of the artifact, for example &lt;devVersionRegex&gt;.*(\d+)[^0-9]+(\d+)[^0-9]+(\d+).*&lt;/devVersionRegex&gt; would identify 3 groups for each number in a 3 number artifact version. If this is not set then the plugin will NOT set the developmentVersion system property meaning the maven release plugin will behave in the default manner.</li><li><b>devVersionGroup</b> This is used to identify the number of the group (1 -n) in the dev version regex pattern that will get replaced, if this is not set then it defaults to the first group.</li><li><b>devVersionReplacement</b> This is the replacement value to be used for the dev version group, if not set it defaults to the special value INCREMENT which means that the value of the number identified as the devVersionGroup will get incremented. </li></ul></div><div class="section"><h3>Incrementing the middle version number Example: <a name="Incrementing_the_middle_version_number_Example:"></a></h3><div class="source"><pre>&lt;project&gt;
  ...
 &lt;build&gt;
  &lt;plugins&gt;
   &lt;plugin&gt;
        &lt;groupId&gt;croche.maven&lt;/groupId&gt;
        &lt;artifactId&gt;maven-custom-version-plugin&lt;/artifactId&gt;
        &lt;configuration&gt;
         &lt;versionConfig&gt;
          &lt;devVersionRegex&gt;.*(\d+)[^0-9]+(\d+)[^0-9]+(\d+).*&lt;/devVersionRegex&gt;
          &lt;devVersionGroup&gt;2&lt;/devVersionGroup&gt;
         &lt;/versionConfig&gt;
        &lt;/configuration&gt;
   &lt;/plugin&gt;
  &lt;/plugins&gt;
 &lt;/build&gt;
  ...
&lt;/project&gt;</pre></div><p>The example configuration above will increment the middle number in a version string, for example if the current version number is 1.1.0-SNAPSHOT then by default the maven release plugin will increment the last digit so you would end up with 1.1.1-SNAPSHOT as the next development version in the POM post release. If however you used the above maven custom version plugin and ran your release with the goals: custom-version:generate-versions release:prepare release:perform then you would end up with the middle digit being incremented so it would become 1.2.0-SNAPSHOT after release. The devVersionGroup has a value as 2 which chooses the 2nd group in the regex pattern as the number to increment. If the devVersionGroup was set to 1 then the next development version would in this example become 2.1.0-SNAPSHOT </p></div><div class="section"><h3>Having a custom release version based on a profile property Example:<a name="Having_a_custom_release_version_based_on_a_profile_property_Example:"></a></h3><div class="source"><pre>&lt;project&gt;
  ...
 &lt;build&gt;
  &lt;plugins&gt;
   &lt;plugin&gt;
        &lt;groupId&gt;croche.maven&lt;/groupId&gt;
        &lt;artifactId&gt;maven-custom-version-plugin&lt;/artifactId&gt;
        &lt;configuration&gt;
         &lt;versionConfig&gt;
          &lt;devVersionRegex&gt;.*(\d+)[^0-9]+(\d+)[^0-9]+(\d+).*&lt;/devVersionRegex&gt;
          &lt;devVersionGroup&gt;2&lt;/devVersionGroup&gt;
          &lt;releaseVersionRegex&gt;.*(-SNAPSHOT)&lt;/releaseVersionRegex&gt;
          &lt;releaseVersionGroup&gt;1&lt;/releaseVersionGroup&gt;
          &lt;releaseVersionReplacement&gt;-${profile.name}&lt;/releaseVersionReplacement&gt;
         &lt;/versionConfig&gt;
        &lt;/configuration&gt;
   &lt;/plugin&gt;
  &lt;/plugins&gt;
 &lt;/build&gt;
  ...
&lt;/project&gt;</pre></div><p>The example configuration above when releasing will change the version number for the release to have a profile name added to it, for example if the version prior to release was 1.1.0-SNAPSHOT and the release was ran for a profile which had the property profile.name set to &quot;prod&quot; then the release version would become 1.1.0-prod, also as above the next development version in this case would become 1.2.0-SNAPSHOT.</p></div></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">Copyright &#169;                    2011
                        <a href="http://code.google.com/p/croche/">Conor Roche</a>.
            All Rights Reserved.      
                
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
